<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/style.css">
    <%- title %>
  </head>
  <body>
    <div
      id="carouselExampleIndicators"
      class="carousel slide carousel-fade"
      data-bs-ride="carousel"
      data-bs-pause="false"
      data-bs-interval="2000"
    >

    <!-- Carousel Indicators -->
      <div class="carousel-indicators">
        <% for (let i = 0; i < results.length; i++) {%>
          <button
            <% if (i === 0 ) { %>
              class="active"
            <% } %>
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide-to="<%= i %>"
            aria-current="true"
            aria-label="Slide
            <%= i %>"
          >
           <span></span>
          </button>
        <% } %>
      </div>
    <!-- End Carousel Indicators -->

    <!-- Carousel Items -->
      <div class="carousel-inner">
        <% results.forEach(function(result, index) { %>
        <%#
          # data-bs-interval only accepts values in milliseconds, but the return value is set to seconds
          # example 1, 2, 3, 50... We need to multiply the return values by 1000 to convert to milliseconds
          %>
        <div data-bs-interval="<%= result.transition_time * 1000 %> "
          <% if (index === 0) { %>
            class="carousel-item active"
          <% } else { %>
            class="carousel-item"
          <% } %>

          style="
            background-image: url('<%- result.image_location %>');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
          "
        >
        <% if (result.show_info !== 0) { %>
          <div class="carousel-caption">
            <h2 class="countdown"></h2>
            <h1 class="mb-2 carousel-title"><%= result.title %></h1>
            <p class="mt-3"><%= result.description %></p>
          </div>
        <% } %>
        </div>
        <% }); %>
      </div>
      <!-- End Carousel Items -->
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous">
    </script>
  </body>
</html>
